P8105 HW2
================
Mahdi Maktabi - mm6410
2024-10-01

This document is P8105 Homework 2.

I loaded necessary packages (e.g. `tidyverse` and `dplyr`).

## Problem 1

I will import the NYC Transit Subway Dataset.

``` r
subway_df = read_csv(
  file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
  na = c(".", "NA", "")) |> 
  janitor::clean_names() |> 
  select(line:entry, vending, ada) |> 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

The dataset has 1,868 observations and 19 variables (1,868 x 19). The
variables include line, station name, station longitude/latitude, routes
1-11, entry and entrance type, vending, and ADA compliance.

To clean the data, the CSV data file was imported, missing values were
excluded, and the variable names were cleaned such that they were all
lowercase. I selected only the variables listed above and changed the
“entry” column so that YES/NO character values were converted to
TRUE/FALSE logistic values.

The current dataset is not tidy. For example, the routes (1-11) can be
condensed into two separate columns: `route_name` and `route_number`.

``` r
distinct(subway_df, station_name, line) |> 
  nrow()
```

    ## [1] 465

``` r
filter(subway_df, ada == TRUE) |> 
  nrow()
```

    ## [1] 468

``` r
filter(subway_df, vending == "NO") |> 
  summarize(mean(entry)) |> 
  pull()
```

    ## [1] 0.3770492

Using the code above, we see that there are:

- 465 distinct stations - identified by name and line
- 468 stations are ADA compliant
- 37.7% of stations entrances/exits without vending allow entrance

The code below will now reformat data to create route_number and
route_name columns:

``` r
subway_df = read_csv(
  file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
  na = c(".", "NA", "")) |> 
  janitor::clean_names() |> 
  select(line:entry, vending, ada) |> 
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE)) |>
  mutate(across(starts_with("route"), as.character))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
subway_tidy_df = 
  pivot_longer(
    subway_df,
    cols = starts_with("route"),
    names_to = "route_number",
    values_to = "route_name",
    values_drop_na = TRUE
  )
```

``` r
filter(
  subway_tidy_df, route_name == "A") |> 
  nrow()
```

    ## [1] 273

``` r
filter(
  subway_tidy_df, route_name == "A" & ada == TRUE) |> 
  distinct(station_name, line) |> 
  nrow()
```

    ## [1] 17

Using this tidy subway dataset, we can now show that:

- There are 273 distinct subway stations that serve the A train.
- Of the stations that serve the A train, there are 17 that are ADA
  compliant.
